<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Chat by Web Sockets Record</title>
    <script type="text/javascript" src="/public/components/jquery/jquery.min.js"></script>
</head>
<body>

<%if(role == 1){%>

<%}else{%>
<button type="button">分配试题</button>
<button type="button">白板</button>
<div>在线学员：</div>
<div id="online"></div>
<%}%>

<div id="show"></div>

<div id="wait" style="width: 100%;height:100%;position:relative;display: none">
    <div style="width: 100%;height: 100%;background: #000000;opacity: 0.5; position:absolute; left:0; top:0;"></div>
    <div style="width: 100%;height: 100%;text-align: center;position: fixed;color: #ffffff;top: 50%">请等待</div>
</div>


</body>

<script type='text/javascript'>

    var role = <%=role%>;
    var userID = '<%=userID%>';
    var classCode = '<%=classCode%>';

    var ws = new WebSocket("ws://127.0.0.1:3010");
    ws.onopen = function () {
        $("#show").text('open');
        {
            var json = {};
            json.method = 'init';
            json.type = 'ClassRoom';
            json.role = role;
            json.userID = userID;
            json.classCode = classCode;
            ws.send(JSON.stringify(json));
        }
    };
    ws.onclose = function (e) {
        console.log("Close connection to websocket");
    }
    ws.onmessage = function (e) {
        $("#show").text(e.data);
    }
</script>
</html>