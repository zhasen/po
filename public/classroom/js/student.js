function initStudent(){}function dealStudentMessage(c){switch(c.method){case ALLMETHOD.init:switch(c.mode){case ALLMODE.teacher_offline:current_Page=0;initStudentWait("老师离线，请稍后...");break;case ALLMODE.wait_teacher_distribute:current_Page=0;initStudentWait("等待老师分配试题...");break;case ALLMODE.student_answer:var a;current_Page=a;test_Id=c.testId;select_pages=c.selectPages;if(c.testData){Player.paperAnswers={};Player.paperAnswers[c.testData.subjectId]=JSON.parse(c.testData.answerContent);Player.buildAnswer();current_Page=c.testData.pageIndex}initStudentAnswer();break;case ALLMODE.teacher_speak:select_pages=c.selectPages;current_Page=c.currentPage;initStudentExplain();break}break;case ALLSTUDENTRECEIVEMETHOD.offline:current_Page=0;classMode=ALLMODE.teacher_offline;initStudentWait("老师离线，请稍后...");break;case ALLSTUDENTRECEIVEMETHOD.wait:current_Page=0;classMode=ALLMODE.wait_teacher_distribute;initStudentWait("等待老师分配试题...");break;case ALLSTUDENTRECEIVEMETHOD.answer:var a;current_Page=a;test_Id=new UUID().id;classMode=ALLMODE.student_answer;select_pages=c.selectPages;$(".subject_page").text("");Player.paperAnswers={};Player.buildAnswer();initStudentAnswer();break;case ALLSTUDENTRECEIVEMETHOD.explain:classMode=ALLMODE.teacher_speak;current_Page=c.page;initStudentExplain();break;case ALLSTUDENTRECEIVEMETHOD.white:if(c.bShow){ctxGraphics.clearRect(0,0,width,height);ctxDrawing.clearRect(0,0,width,height);$canvas.show()}else{$canvas.hide()}break;case ALLSTUDENTRECEIVEMETHOD.path_clear:canvas.graphics.push({type:"clear"});redrawGraphics();break;case ALLSTUDENTRECEIVEMETHOD.path_down:canvas.drawing={type:"path",color:c.color,width:c.thickness,points:[{x:c.x,y:c.y}]};break;case ALLSTUDENTRECEIVEMETHOD.path_move:var b=canvas.drawing;if(b&&b.type==="path"){b.points.push({x:c.x,y:c.y});redrawDrawing()}break;case ALLSTUDENTRECEIVEMETHOD.path_up:var b=canvas.drawing;if(b&&b.type==="path"){b.points.push({x:c.x,y:c.y});canvas.graphics.push(b);drawPath(ctxGraphics,b);canvas.drawing=null;canvas.history=[];redrawDrawing()}break;case ALLSTUDENTRECEIVEMETHOD.change_page:goToPage(c.page,true);break;default:break}}function initStudentWait(b){delete select_pages;$("#forbid_control").hide();var a=$(document).height();$("#loadingText").text(b);$(".overlay").css({height:a});$(".overlay").css({display:"block",opacity:"0.4"});$(".showbox").stop(true).animate({"margin-top":"300px",opacity:"1"},200)}function initStudentReview(b){if(b.length==1){b=b[0];var a;current_Page=a;select_pages=JSON.parse(b.selectPage);if(b.data){b.data=JSON.parse(b.data);Player.paperAnswers={};Player.paperAnswers[b.data.subjectId]=JSON.parse(b.data.answerContent);Player.buildAnswer()}initStudentAnswer()}}function initStudentAnswer(){$("#forbid_control").hide();$(".showbox").stop(true).animate({"margin-top":"250px",opacity:"0"},400);$(".overlay").css({display:"none",opacity:"0"});reloadStudentSelectPage(current_Page)}function initStudentExplain(){$(".showbox").stop(true).animate({"margin-top":"250px",opacity:"0"},400);$(".overlay").css({display:"none",opacity:"0"});$("#forbid_control").show();$("#forbid_control").css({height:$(document).height()});reloadStudentSelectPage(current_Page)}function reloadStudentSelectPage(d){var c=$("#papers");c.children().remove();for(var b=0;b<select_pages.length;b++){var a=parseInt(select_pages[b]);c.append('<li><span id="page_span'+(a)+'" pageIndex="'+a+'"><input type="checkbox" name="checkbox" id="page_checkbox'+b+'" class="cbox" style="visibility: hidden"/> 第'+(a+1)+"页</span></li>")}if(typeof(d)!="undefined"){goToPage(parseInt(d),true)}else{goToPage(parseInt(select_pages[0]),true)}};